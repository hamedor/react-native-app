(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{187:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return J}));var a=n(11),r=n.n(a),i=n(0),c=(n(255),n(3)),s=n(274),u=n(268),d=n(273),l=n(188),o=n(25),j=n(4),f=n(39),h=n(75),b=n(13),O=n(27),g=n(20),x=n.n(g),m=n(88),p=n(32),y=n(53),v=n(59),C=n(132),S=n(190),I=n(49),w=n(8),T=c.default.create({modalView:{margin:20,backgroundColor:"white",borderRadius:20,width:400,height:800,padding:35,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5},button:{borderRadius:20,padding:10,elevation:2},buttonOpen:{backgroundColor:"#F194FF"},buttonClose:{backgroundColor:"#2196F3"},textStyle:{color:"white",fontWeight:"bold",textAlign:"center"},modalText:{marginBottom:15,textAlign:"center"}}),P=function(e){var t=e.modalVisible,n=e.setModalVisible,a=e.data,r=e.addPost,i=e.setUserInputText,c=e.setUserInputTitle,s=e.selectedCathegory,u=e.setSelectedCathegory,d=e.setUserInputLatitude,l=e.setUserInputLongitude,h=e.image,b=e.setImage,O=function(){var e=x()((function*(){var e=yield S.launchImageLibraryAsync({mediaTypes:I.MediaTypeOptions.All,allowsEditing:!0,aspect:[4,3],quality:1});e.cancelled||b(e.uri)}));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(m.default,{animationType:"slide",transparent:!0,visible:t,children:Object(w.jsx)(j.default,{style:T.centeredView,children:Object(w.jsxs)(j.default,{style:T.modalView,children:[Object(w.jsx)(o.default,{style:T.modalText,children:"Hello World!"}),Object(w.jsx)(f.default,{style:[T.button,T.buttonClose],onPress:function(){return n(!t)},children:Object(w.jsx)(o.default,{style:T.textStyle,children:"Hide Modal"})}),Object(w.jsx)(C.Picker,{style:{height:40,width:200},selectedValue:s,onValueChange:function(e){return function(e){u(e)}(e)},children:a.map((function(e){return Object(w.jsx)(C.Picker.Item,{label:e.title,value:e.title},e.title)}))}),Object(w.jsx)(y.default,{style:T.input,onChangeText:function(e){return c(e.toLowerCase())},placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(w.jsx)(y.default,{style:T.input,onChangeText:function(e){return i(e.toLowerCase())},placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(w.jsx)(y.default,{style:T.input,onChangeText:function(e){return d(e.toLowerCase())},placeholder:"\u0428\u0438\u0440\u043e\u0442\u0430"}),Object(w.jsx)(y.default,{style:T.input,onChangeText:function(e){return l(e.toLowerCase())},placeholder:"\u0414\u043e\u043b\u0433\u043e\u0442\u0430"}),Object(w.jsx)(v.default,{title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",onPress:O}),h&&Object(w.jsx)(p.default,{source:{uri:h},style:{width:200,height:200}}),Object(w.jsx)(f.default,{onPress:r,children:Object(w.jsx)(o.default,{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})})})},L=c.default.create({container:{flex:1,paddingTop:22},item:{padding:10,fontSize:18,height:44,borderWidth:1,marginTop:10},img:{width:50,height:50},centeredView:{flex:1,justifyContent:"center",alignItems:"center",marginTop:22},title:{fontSize:30},postAdd:{borderWidth:1,textAlign:"center",marginBottom:10}}),U=function(e){var t=e.data,n=e.isEnabledAdminMode,a=(e.deletePost,e.addPost),c=e.setUserInputTitle,s=e.setUserInputText,u=e.setNavCathegory,d=e.selectedCathegory,l=e.setSelectedCathegory,g=e.setUserInputLatitude,x=e.setUserInputLongitude,m=e.image,p=e.setImage,y=Object(i.useState)(!1),v=r()(y,2),C=v[0],S=v[1],I=Object(O.useNavigation)(),T=function(e){var t=e.title;return Object(w.jsx)(f.default,{onPress:function(e){return function(e){"web"===b.default.OS?u(e.target.textContent):u(e._dispatchInstances.memoizedProps.children[0].props.children),I.navigate("\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438")}(e)},style:L.item,children:Object(w.jsx)(o.default,{style:L.text,children:t})})};return Object(w.jsxs)(j.default,{style:{height:"100%"},children:[Object(w.jsxs)(j.default,{style:L.centeredView,children:[Object(w.jsx)(o.default,{style:L.title,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}),Object(w.jsx)(h.default,{data:t,renderItem:function(e){var t=e.item;return Object(w.jsx)(T,{title:t.title})}})]}),Object(w.jsx)((function(){if(n)return Object(w.jsx)(f.default,{onPress:function(){return S(!C)},children:Object(w.jsx)(o.default,{style:L.postAdd,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442"})})}),{}),Object(w.jsx)(P,{data:t,addPost:a,modalVisible:C,setModalVisible:S,setUserInputTitle:c,setUserInputText:s,setUserInputLatitude:g,setUserInputLongitude:x,selectedCathegory:d,setSelectedCathegory:l,image:m,setImage:p})]})},E=c.default.create({input:{height:40,width:300,margin:12,borderWidth:1,padding:10}}),k=function(e){var t=e.data,n=e.setItem,a=Object(i.useState)(""),c=r()(a,2),s=c[0],u=c[1],d=Object(i.useState)([]),l=r()(d,2),h=l[0],b=l[1],g=Object(O.useNavigation)();Object(i.useEffect)((function(){b((function(){b(Object.values(t).flat().map((function(e){return e.data})).flat(2).filter((function(e){return e.heading.toLowerCase().includes(s)})).map((function(e){return e})))})),console.log(h)}),[s]);return Object(w.jsxs)(j.default,{style:{flex:1,justifyContent:"flex-start",alignItems:"center"},children:[Object(w.jsx)(y.default,{style:E.input,onChangeText:function(e){return u(e.toLowerCase())},placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c"}),Object(w.jsx)((function(){if(s)return h.map((function(e){return Object(w.jsxs)(j.default,{children:[Object(w.jsx)(o.default,{children:e.heading}),Object(w.jsx)(f.default,{style:E.button,onPress:function(){return t=e.heading,g.navigate("\u0418\u0442\u0435\u043c\u044b"),void n(t);var t},children:Object(w.jsx)(o.default,{style:E.text,children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"})})]},e.id)}))}),{})]})},A=n(104),V=function(e){var t=e.isEnabledAdminMode,n=(e.isEnabledDarkTheme,e.setIsEnabledAdminMode);return Object(w.jsx)(j.default,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:Object(w.jsx)(A.default,{trackColor:{false:"#767577",true:"#81b0ff"},thumbColor:t?"#f5dd4b":"#f4f3f4",ios_backgroundColor:"#3e3e3e",onValueChange:function(){return n((function(e){return!e}))},value:t})})},M=function(e,t,n,a,c,s,u,d){var l=Object(i.useState)(e),o=r()(l,2),j=o[0],f=(o[1],Object(i.useState)([])),h=r()(f,2),b=h[0],O=h[1],g=Object(i.useState)(!1),m=r()(g,2),p=m[0],y=m[1],v=Object(i.useState)(!1),C=r()(v,2),S=(C[0],C[1]),I=Object(i.useState)(""),w=r()(I,2),T=(w[0],w[1]),P=Object(i.useState)(0),L=r()(P,2),U=L[0],E=L[1];return Object(i.useEffect)((function(){(function(){var e=x()((function*(){y(!0);try{var e=yield fetch(j),t=yield e.json();if(e.ok){var n=[];Object.entries(t).forEach((function(e){var t=r()(e,2),a=t[0],i=t[1];i.map((function(e){return e.title=a})),n.push({title:a,data:[i]})})),O(n)}else S(!0),T(t)}catch(a){S(!0),T(a.message)}finally{y(!1)}}));return function(){return e.apply(this,arguments)}})()()}),[j,U]),{data:b,isLoading:p,deletePost:function(e,t){var n=t.map((function(e){return e.title}));fetch("http://827013-cs70445.tmweb.ru:4000/"+n[0]+"/"+e,{method:"DELETE"}).then((function(){return E((function(e){return e+1}))}))},addPost:function(e){e.preventDefault();var r=function(){var e=Object.values(b).map((function(e){return e})).flat(),t=0;for(var n in e)e[n].id>e[t].id&&(t=n);if(e[t])return e[t].id}();fetch("http://827013-cs70445.tmweb.ru:4000/"+u+"/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r+1,heading:t,text:n,latitude:a,longitude:c,img:s})}).then((function(){return E((function(e){return e+1}))}))}}},N=c.default.create({img:{width:50,height:50}}),B=function(e){var t=e.data,n=(e.setNavCathegory,e.navCathegory),a=e.setItem,r=Object(O.useNavigation)();return Object(w.jsx)(j.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:Object(w.jsx)((function(){return t.filter((function(e){return e.title===n})).map((function(e){return e.data})).flat(2).map((function(e){return Object(w.jsxs)(j.default,{children:[Object(w.jsx)(p.default,{style:N.img,source:{uri:e.img}}),Object(w.jsx)(o.default,{children:e.heading}),Object(w.jsx)(o.default,{children:e.text}),Object(w.jsx)(f.default,{style:N.button,onPress:function(){return t=e.heading,r.navigate("\u0418\u0442\u0435\u043c\u044b"),void a(t);var t},children:Object(w.jsx)(o.default,{style:N.text,children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"})})]},e.id)}))}),{})})},z=n(186),F=c.default.create({img:{width:50,height:50},map:{width:100,height:100}}),W=function(e){var t=e.data,n=(e.navCathegory,e.item);return Object(w.jsxs)(j.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:[Object(w.jsx)((function(){return t.map((function(e){return e.data})).flat(2).filter((function(e){return e.heading===n})).map((function(e){return Object(w.jsxs)(j.default,{children:[Object(w.jsx)(o.default,{children:e.heading}),Object(w.jsx)(o.default,{children:e.text}),Object(w.jsx)(p.default,{style:F.img,source:{uri:e.img}})]},e.id)}))}),{}),Object(w.jsx)(z.default,{style:F.map})]})},D=Object(u.default)();function J(){var e=Object(i.useState)(""),t=r()(e,2),n=t[0],a=t[1],c=Object(i.useState)(""),u=r()(c,2),o=u[0],j=u[1],f=Object(i.useState)(""),h=r()(f,2),b=h[0],O=h[1],g=Object(i.useState)(""),x=r()(g,2),m=x[0],p=x[1],y=Object(i.useState)(null),v=r()(y,2),C=v[0],S=v[1],I=Object(i.useState)(""),T=r()(I,2),P=T[0],L=T[1],E=Object(i.useState)(""),A=r()(E,2),N=A[0],z=A[1],F=Object(i.useState)(),J=r()(F,2),R=J[0],H=J[1],_=Object(i.useState)(""),q=r()(_,2),G=(q[0],q[1],Object(i.useState)(!0)),K=r()(G,2),Q=K[0],X=K[1],Y=Object(i.useState)(!1),Z=r()(Y,2),$=Z[0],ee=(Z[1],M("http://827013-cs70445.tmweb.ru:4000/db",o,n,b,m,C,R)),te=ee.data,ne=(ee.isLoading,ee.deletePost),ae=ee.addPost,re=Object(d.default)(),ie=Object(d.default)();return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(s.default,{children:Object(w.jsxs)(D.Navigator,{screenOptions:function(e){var t=e.route;return{tabBarIcon:function(e){var n,a=e.focused,r=e.color,i=e.size;return"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"===t.name?n=a?"home":"home-outline":"\u041f\u043e\u0438\u0441\u043a"===t.name?n=a?"search":"search-outline":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"===t.name&&(n=a?"settings":"settings-outline"),Object(w.jsx)(l.default,{name:n,size:i,color:r})},tabBarActiveTintColor:"#287233",tabBarInactiveTintColor:"gray",tabBarStyle:{backgroundColor:"#211c13"}}},children:[Object(w.jsx)(D.Screen,{name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",component:function(){return Object(w.jsxs)(re.Navigator,{children:[Object(w.jsx)(re.Screen,{name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",children:function(){return Object(w.jsx)(U,{data:te,isEnabledAdminMode:Q,deletePost:ne,addPost:ae,setUserInputTitle:j,setUserInputText:a,setUserInputLatitude:O,setUserInputLongitude:p,selectedCathegory:R,setSelectedCathegory:H,image:C,setImage:S,setNavCathegory:L})}}),Object(w.jsx)(re.Screen,{name:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",children:function(){return Object(w.jsx)(B,{data:te,navCathegory:P,setItem:z})}}),Object(w.jsx)(re.Screen,{name:"\u0418\u0442\u0435\u043c\u044b",children:function(){return Object(w.jsx)(W,{data:te,item:N})}})]})},options:{headerShown:!1}}),Object(w.jsx)(D.Screen,{name:"\u041f\u043e\u0438\u0441\u043a",component:function(){return Object(w.jsxs)(ie.Navigator,{children:[Object(w.jsx)(ie.Screen,{name:"\u041f\u043e\u0438\u0441\u043a",children:function(){return Object(w.jsx)(k,{data:te,setItem:z})}}),Object(w.jsx)(ie.Screen,{name:"\u0418\u0442\u0435\u043c\u044b",children:function(){return Object(w.jsx)(W,{data:te,item:N})}})]})},options:{headerShown:!1}}),Object(w.jsx)(D.Screen,{name:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",children:function(){return Object(w.jsx)(V,{isEnabledAdminMode:Q,setIsEnabledAdminMode:X,isEnabledDarkTheme:$})}})]})})})}c.default.create({container:{backgroundColor:"#211c13"}})},197:function(e,t,n){e.exports=n(256)}},[[197,1,2]]]);
//# sourceMappingURL=app.e80e716a.chunk.js.map