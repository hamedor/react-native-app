(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{165:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return T}));var r=n(23),c=n.n(r),a=n(9),i=n.n(a),u=n(0),o=(n(221),n(8)),s=n(240),d=n(235),f=n(234),l=n(164),j=n(28),b=n(6),h=n(32),O=n(94),g=n(14),m=o.default.create({container:{flex:1,paddingTop:22},sectionHeader:{paddingTop:2,paddingBottom:2,paddingLeft:10,paddingRight:10,fontSize:22,fontWeight:"bold",color:"#fff",backgroundColor:"#F55145"},item:{padding:10,fontSize:18,height:44},img:{width:50,height:50}}),p=function(t){var e=t.data;return Object(g.jsx)(b.default,{style:m.container,children:Object(g.jsx)(O.default,{renderItem:function(t){return t.item.map((function(t){return Object(g.jsxs)(b.default,{children:[Object(g.jsx)(j.default,{children:t.heading}),Object(g.jsx)(j.default,{children:t.text}),Object(g.jsx)(h.default,{style:m.img,source:{uri:t.img}})]},t.id)}))},renderSectionHeader:function(t){var e=t.section.title;return Object(g.jsx)(j.default,{style:{fontWeight:"bold"},children:e})},sections:e})})},x=n(135),S=o.default.create({input:{height:40,width:300,margin:12,borderWidth:1,padding:10}}),v=function(t){var e=Object(u.useState)(""),n=i()(e,2),r=n[0],c=n[1],a=Object(u.useState)([]),o=i()(a,2),s=o[0],d=o[1];Object(u.useEffect)((function(){d((function(){d(Object.values(t).flat().map((function(t){return t.data})).flat(2).filter((function(t){return t.heading.includes(r)})).map((function(t){return t})))}))}),[r]);return Object(g.jsxs)(b.default,{style:{flex:1,justifyContent:"flex-start",alignItems:"center"},children:[Object(g.jsx)(x.default,{style:S.input,onChangeText:function(t){return c(t.toLowerCase())},placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c"}),Object(g.jsx)((function(){if(r)return s.map((function(t){return Object(g.jsx)(b.default,{children:Object(g.jsx)(j.default,{children:t.heading})},t.id)}))}),{})]})},y=function(){return Object(g.jsx)(b.default,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:Object(g.jsx)(j.default,{children:"Settings!"})})},C=function(t,e,n,r,a){var o=Object(u.useState)(t),s=i()(o,2),d=s[0],f=(s[1],Object(u.useState)([])),l=i()(f,2),j=l[0],b=l[1],h=Object(u.useState)(!1),O=i()(h,2),g=O[0],m=O[1],p=Object(u.useState)(!1),x=i()(p,2),S=(x[0],x[1]),v=Object(u.useState)(""),y=i()(v,2),C=(y[0],y[1]),w=Object(u.useState)(0),T=i()(w,2),k=T[0],E=T[1];return Object(u.useEffect)((function(){(function(){var t=c()((function*(){m(!0);try{var t=yield fetch(d),e=yield t.json();if(t.ok){var n=[];Object.entries(e).forEach((function(t){var e=i()(t,2),r=e[0],c=e[1];n.push({title:r,data:[c]})})),b(n)}else S(!0),C(e)}catch(r){S(!0),C(r.message)}finally{m(!1)}}));return function(){return t.apply(this,arguments)}})()()}),[d,k]),{data:j,isLoading:g,deletePost:function(t,e){var n=t.target.id;console.log(e),fetch("http://827013-cs70445.tmweb.ru:4000/"+e+"/"+n,{method:"DELETE"}).then((function(){return E((function(t){return t+1}))}))},addPost:function(t){t.preventDefault();var c=function(){var t=Object.values(j).map((function(t){return t})).flat(),e=0;for(var n in t)t[n].id>t[e].id&&(e=n);if(t[e])return t[e].id}();fetch("http://827013-cs70445.tmweb.ru:4000/"+a+"/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:c+1,heading:e,text:n,img:r})}).then((function(){return E((function(t){return t+1}))}))}}},w=(Object(f.default)(),Object(d.default)());function T(){var t=Object(u.useState)(""),e=i()(t,2),n=e[0],r=(e[1],Object(u.useState)("")),c=i()(r,2),a=c[0],o=(c[1],Object(u.useState)("")),d=i()(o,2),f=(d[0],d[1],Object(u.useState)("museums")),j=i()(f,2),b=j[0],h=(j[1],Object(u.useState)("")),O=i()(h,2),m=O[0],x=(O[1],C("http://827013-cs70445.tmweb.ru:4000/db",n,a,m,b)),S=x.data;x.isLoading,x.deletePost,x.addPost;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(s.default,{children:Object(g.jsxs)(w.Navigator,{screenOptions:function(t){var e=t.route;return{tabBarIcon:function(t){var n,r=t.focused,c=t.color,a=t.size;return"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"===e.name?n=r?"home":"home-outline":"\u041f\u043e\u0438\u0441\u043a"===e.name?n=r?"search":"search-outline":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"===e.name&&(n=r?"settings":"settings-outline"),Object(g.jsx)(l.default,{name:n,size:a,color:c})},tabBarActiveTintColor:"#287233",tabBarInactiveTintColor:"gray",tabBarStyle:{backgroundColor:"#211c13"}}},children:[Object(g.jsx)(w.Screen,{name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",children:function(){return Object(g.jsx)(p,{data:S})}}),Object(g.jsx)(w.Screen,{name:"\u041f\u043e\u0438\u0441\u043a",children:function(){return Object(g.jsx)(v,{data:S})}}),Object(g.jsx)(w.Screen,{name:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",component:y})]})})})}o.default.create({container:{backgroundColor:"#211c13"}})},174:function(t,e,n){t.exports=n(222)}},[[174,1,2]]]);
//# sourceMappingURL=app.8e37a770.chunk.js.map